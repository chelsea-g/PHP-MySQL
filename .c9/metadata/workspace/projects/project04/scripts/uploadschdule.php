{"filter":false,"title":"uploadschdule.php","tooltip":"/projects/project04/scripts/uploadschdule.php","undoManager":{"mark":52,"position":52,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"],"id":1}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["?"],"id":2}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["p"],"id":3}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["h"],"id":4}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["p"],"id":5}],[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"insert","lines":["?"],"id":8}],[{"start":{"row":2,"column":1},"end":{"row":2,"column":2},"action":"insert","lines":[">"],"id":9}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":10}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":11}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":12}],[{"start":{"row":0,"column":0},"end":{"row":5,"column":2},"action":"remove","lines":["<?php","","","","","?>"],"id":13},{"start":{"row":0,"column":0},"end":{"row":132,"column":2},"action":"insert","lines":["<?php","","    include_once('header.php');","    include_once('../classes/Database.php');","    include_once('../classes/Admin.php');","        ","        /* THIS NEEDS TO BE CHANGED   */","        $admin = new Admin();       ///","      ////////////////////////////////","        $flag = true;","        $page_title = 'Create Employee Account';","    ","    ","    //Validate the add employee form","    if (isset($_POST['submit'])) {","        ","        //Save the form values","        $first_name = Database::sanitizeInput($_POST['first_name']);","        $last_name = Database::sanitizeInput($_POST['last_name']);","        $job_id = Database::sanitizeInput($_POST['job_id']);","        $hire_date = Database::sanitizeInput($_POST['hire_date']);","        $username = Database::sanitizeInput($_POST['username']);","        $temp_password = Database::sanitizeInput($_POST['temp_password']);","        $temp_password2 = Database::sanitizeInput($_POST['temp_password2']);","        $is_admin= Database::sanitizeInput($_POST['is_admin']);","        ","        //Make sure all fields are filled and passwords match","        if ((strlen($temp_password) < 8) || (strlen($temp_password2) < 8) || ($temp_password != $temp_password2)) {","            ","            echo '<p class=\"error\">Please make sure your passwords match and that they\\'re at least 8 characters long.</p>';","            ","        } else {","            ","            if (!empty($first_name) && !empty($last_name) && !empty($job_id)","                && !empty($hire_date) && !empty($username) && !is_null($is_admin)) {","                ","                $query = \"SELECT username FROM employee WHERE username = '$username'\";","                $results = Database::runQuery($query);","                ","                if (mysqli_num_rows($results) == 0) {","                    ","                    $flag = false;","                    ","                    $was_added = $admin->addEmployee($first_name, $last_name, $username, $temp_password, $job_id, $hire_date, $is_admin);","                    ","                    ","                    if ($was_added) {","                        ","                        echo 'Employee successfully added!<br />';","                        echo '<a href=\"addemployee.php\">Add Another</a>';","                        ","                    } else {","                        ","                        echo '<p class=\"error\">Error adding employee.</p>';","                        ","                    }","                    ","                } else {","                    ","                    echo '<p class=\"error\">Sorry, that username is already in use.</p>';","                    ","                }","                ","                ","            } else {","                ","                echo '<p class=\"error\">Please make sure that every field is entered.</p>';","                ","            }","            ","        }","        ","    }","    ","    if ($flag) {","?>","","        <form method=\"post\" class=\"form\" action=\"<?= $_SERVER['PHP_SELF'];?>\">","            ","            <fieldset>","                <legend>","                    <h3>New ZaZa Hut Employee Account</h3>","                </legend>","                <div class=\"leftform\">","                    <label for=\"first_name\">First Name</label>","                        <input type=\"text\" id=\"first_name\" name=\"first_name\" value=\"<?php if(!empty($first_name)) echo $first_name; ?>\"/><br />","                    ","                    <label for=\"last_name\">Last Name</label>","                        <input type=\"text\" id=\"last_name\" name=\"last_name\" value=\"<?php if(!empty($last_name)) echo $last_name; ?>\"/><br />","                        ","                    <label for=\"job_id\">Job Title (drop down)</label>","                        <select class=\"input\" id=\"job_id\" name=\"job_id\">","                            <option selected disabled>Choose One</option>","                            <option <?php if($job_id == \"1\") echo 'selected=\"selected\"'; ?> value=\"1\">Manager</option>","                            <option <?php if($job_id == \"2\") echo 'selected=\"selected\"'; ?> value=\"2\">FOH</option>","                            <option <?php if($job_id == \"3\") echo 'selected=\"selected\"'; ?> value=\"3\">BOH</option>","                            <option <?php if($job_id == \"4\") echo 'selected=\"selected\"'; ?> value=\"4\">Driver</option>","                        </select>","                    <br />","                    ","                    <label for=\"hire_date\">Hire Date</label>","                    <input type=\"date\" id=\"hire_date\" name=\"hire_date\" value=\"<?php if(!empty($hire_date)) echo $hire_date; ?>\"/><br />","                </div>","                ","                <div class=\"rightform\">","                    <label for=\"username\">Desired Username</label>","                        <input type=\"text\" id=\"username\" name=\"username\" value=\"<?php if(!empty($username)) echo $username; ?>\"/><br />","                        ","                    <label for=\"password\">Temporary Password</label>","                        <input type=\"password\" id=\"temp_password\" name=\"temp_password\" /><br />","                        ","                    <label for=\"password2\">Repeat Password</label>","                        <input type=\"password\" id=\"temp_password2\" name=\"temp_password2\" /><br />","                    ","                    <label for=\"is_admin\" id=\"is_admin\">Is this an admin account?</label><br />","                        <label for=\"yes\">Yes</label><input type=\"radio\" <?php if ($_POST['is_admin'] == '1') echo 'checked'; ?> id=\"is_admin\" name=\"is_admin\" value=\"1\">","                        <label for=\"no\">No</label><input type=\"radio\" <?php if ($_POST['is_admin'] == '0') echo 'checked'; ?> id=\"is_admin\" name=\"is_admin\" value=\"0\"> <br />","                </div>   ","                <div class=\"centerform\">","                    <input type=\"submit\" id=\"submit\" name=\"submit\" />","                </div>","            </fieldset>","            ","            ","        </form>","","    ","<?php","    }","","    include_once('footer.php');","","?>"]}],[{"start":{"row":10,"column":23},"end":{"row":10,"column":46},"action":"remove","lines":["Create Employee Account"],"id":14},{"start":{"row":10,"column":23},"end":{"row":10,"column":24},"action":"insert","lines":["U"]}],[{"start":{"row":10,"column":24},"end":{"row":10,"column":25},"action":"insert","lines":["p"],"id":15}],[{"start":{"row":10,"column":25},"end":{"row":10,"column":26},"action":"insert","lines":["l"],"id":16}],[{"start":{"row":10,"column":26},"end":{"row":10,"column":27},"action":"insert","lines":["o"],"id":17}],[{"start":{"row":10,"column":27},"end":{"row":10,"column":28},"action":"insert","lines":["a"],"id":18}],[{"start":{"row":10,"column":28},"end":{"row":10,"column":29},"action":"insert","lines":["d"],"id":19}],[{"start":{"row":10,"column":29},"end":{"row":10,"column":30},"action":"insert","lines":[" "],"id":20}],[{"start":{"row":10,"column":30},"end":{"row":10,"column":31},"action":"insert","lines":["A"],"id":21}],[{"start":{"row":10,"column":30},"end":{"row":10,"column":31},"action":"remove","lines":["A"],"id":22}],[{"start":{"row":10,"column":30},"end":{"row":10,"column":31},"action":"insert","lines":["a"],"id":23}],[{"start":{"row":10,"column":30},"end":{"row":10,"column":31},"action":"remove","lines":["a"],"id":24}],[{"start":{"row":10,"column":30},"end":{"row":10,"column":31},"action":"insert","lines":["A"],"id":25}],[{"start":{"row":10,"column":31},"end":{"row":10,"column":32},"action":"insert","lines":[" "],"id":26}],[{"start":{"row":10,"column":32},"end":{"row":10,"column":33},"action":"insert","lines":["S"],"id":27}],[{"start":{"row":10,"column":33},"end":{"row":10,"column":34},"action":"insert","lines":["c"],"id":28}],[{"start":{"row":10,"column":34},"end":{"row":10,"column":35},"action":"insert","lines":["h"],"id":29}],[{"start":{"row":10,"column":35},"end":{"row":10,"column":36},"action":"insert","lines":["e"],"id":30}],[{"start":{"row":10,"column":36},"end":{"row":10,"column":37},"action":"insert","lines":["d"],"id":31}],[{"start":{"row":10,"column":37},"end":{"row":10,"column":38},"action":"insert","lines":["u"],"id":32}],[{"start":{"row":10,"column":38},"end":{"row":10,"column":39},"action":"insert","lines":["l"],"id":33}],[{"start":{"row":10,"column":39},"end":{"row":10,"column":40},"action":"insert","lines":["e"],"id":34}],[{"start":{"row":81,"column":24},"end":{"row":81,"column":53},"action":"remove","lines":["New ZaZa Hut Employee Account"],"id":35},{"start":{"row":81,"column":24},"end":{"row":81,"column":25},"action":"insert","lines":["U"]}],[{"start":{"row":81,"column":25},"end":{"row":81,"column":26},"action":"insert","lines":["p"],"id":36}],[{"start":{"row":81,"column":26},"end":{"row":81,"column":27},"action":"insert","lines":["l"],"id":37}],[{"start":{"row":81,"column":27},"end":{"row":81,"column":28},"action":"insert","lines":["o"],"id":38}],[{"start":{"row":81,"column":28},"end":{"row":81,"column":29},"action":"insert","lines":["a"],"id":39}],[{"start":{"row":81,"column":29},"end":{"row":81,"column":30},"action":"insert","lines":["d"],"id":40}],[{"start":{"row":81,"column":30},"end":{"row":81,"column":31},"action":"insert","lines":[" "],"id":41}],[{"start":{"row":81,"column":31},"end":{"row":81,"column":32},"action":"insert","lines":["a"],"id":42}],[{"start":{"row":81,"column":31},"end":{"row":81,"column":32},"action":"remove","lines":["a"],"id":43}],[{"start":{"row":81,"column":31},"end":{"row":81,"column":32},"action":"insert","lines":["A"],"id":44}],[{"start":{"row":81,"column":32},"end":{"row":81,"column":33},"action":"insert","lines":[" "],"id":45}],[{"start":{"row":81,"column":33},"end":{"row":81,"column":34},"action":"insert","lines":["S"],"id":46}],[{"start":{"row":81,"column":34},"end":{"row":81,"column":35},"action":"insert","lines":["c"],"id":47}],[{"start":{"row":81,"column":35},"end":{"row":81,"column":36},"action":"insert","lines":["h"],"id":48}],[{"start":{"row":81,"column":36},"end":{"row":81,"column":37},"action":"insert","lines":["e"],"id":49}],[{"start":{"row":81,"column":37},"end":{"row":81,"column":38},"action":"insert","lines":["d"],"id":50}],[{"start":{"row":81,"column":38},"end":{"row":81,"column":39},"action":"insert","lines":["u"],"id":51}],[{"start":{"row":81,"column":39},"end":{"row":81,"column":40},"action":"insert","lines":["l"],"id":52}],[{"start":{"row":81,"column":40},"end":{"row":81,"column":41},"action":"insert","lines":["e"],"id":53}]]},"ace":{"folds":[],"scrolltop":1140,"scrollleft":0,"selection":{"start":{"row":81,"column":41},"end":{"row":81,"column":41},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":67,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1462220510534,"hash":"0c4a6b0bfb03f835d7e6145427fd034675b55f01"}